# Bahamut BBS Android - æ¶æ§‹è¦–è¦ºåŒ–

```
ğŸ“¦ com.kota å¥—ä»¶æ¶æ§‹
â”‚
â”œâ”€â”€ ğŸ¨ asFramework (æ‡‰ç”¨ç¨‹å¼æ¡†æ¶å±¤)
â”‚   â”œâ”€â”€ ğŸ“‚ dialog (å°è©±æ¡†ç³»çµ±)
â”‚   â”œâ”€â”€ ğŸ“‚ model (åŸºç¤è³‡æ–™æ¨¡å‹)
â”‚   â”œâ”€â”€ ğŸ“‚ network (ç¶²è·¯ç‹€æ…‹ç®¡ç†)
â”‚   â”œâ”€â”€ ğŸ“‚ pageController â­â­â­â­â­ (é é¢æ§åˆ¶å™¨ - iOS é¢¨æ ¼)
â”‚   â”œâ”€â”€ ğŸ“‚ thread â­â­â­â­â­ (åŸ·è¡Œç·’ç®¡ç† - ASRunner æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ ğŸ“‚ ui (UI å…ƒä»¶åº«)
â”‚   â””â”€â”€ ğŸ“‚ utils (å·¥å…·é¡åˆ¥)
â”‚
â”œâ”€â”€ ğŸ® Bahamut (æ ¸å¿ƒæ¥­å‹™é‚è¼¯å±¤)
â”‚   â”œâ”€â”€ ğŸ“‚ command â­â­â­â­â­ (BBS å‘½ä»¤ç³»çµ±)
â”‚   â”œâ”€â”€ ğŸ“‚ dataModels (è³‡æ–™æ¨¡å‹èˆ‡æœ¬åœ°å„²å­˜)
â”‚   â”œâ”€â”€ ğŸ“‚ dialogs (æ¥­å‹™å°è©±æ¡†)
â”‚   â”œâ”€â”€ ğŸ“‚ listPage â­â­â­â­â­ (åˆ—è¡¨é é¢æ¶æ§‹ - 20é …/å€å¡Š)
â”‚   â”œâ”€â”€ ğŸ“‚ pages (æ¥­å‹™é é¢é›†åˆ)
â”‚   â”‚   â”œâ”€â”€ articlePage/ (æ–‡ç« é é¢)
â”‚   â”‚   â”œâ”€â”€ boardPage/ (çœ‹æ¿é é¢)
â”‚   â”‚   â”œâ”€â”€ bookmarkPage/ (æ›¸ç±¤ç®¡ç†)
â”‚   â”‚   â”œâ”€â”€ essencePage/ (ç²¾è¯å€)
â”‚   â”‚   â”œâ”€â”€ mailPage/ (ä¿¡ç®±)
â”‚   â”‚   â”œâ”€â”€ messages/ (è¨Šæ¯ç³»çµ±)
â”‚   â”‚   â”œâ”€â”€ login/ (ç™»å…¥)
â”‚   â”‚   â””â”€â”€ ... (æ›´å¤šé é¢)
â”‚   â””â”€â”€ ğŸ“‚ service (èƒŒæ™¯æœå‹™èˆ‡è¨­å®š)
â”‚
â”œâ”€â”€ ğŸ“¡ telnet (Telnet å®¢æˆ¶ç«¯æ ¸å¿ƒå±¤)
â”‚   â”œâ”€â”€ ğŸ“‚ logic (æ¥­å‹™é‚è¼¯è™•ç†)
â”‚   â”œâ”€â”€ ğŸ“‚ model â­â­â­â­â­ (Telnet è³‡æ–™æ¨¡å‹ - TelnetFrame)
â”‚   â””â”€â”€ ğŸ“‚ reference â­â­â­â­â­ (ANSI/Telnet è¦ç¯„)
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ telnetUI (Telnet UI å…ƒä»¶å±¤)
â”‚   â””â”€â”€ ğŸ“‚ textView â­â­â­â­â­ (æ–‡å­—è¦–åœ–å…ƒä»¶ - å¤šå­—é«”å¤§å°)
â”‚
â”œâ”€â”€ ğŸ’¾ dataPool (è³‡æ–™ç·©è¡ç®¡ç†å±¤)
â”‚   â”œâ”€â”€ ByteIterator.kt
â”‚   â””â”€â”€ MutableByteBuffer.kt
â”‚
â””â”€â”€ ğŸ”¤ textEncoder (ç·¨ç¢¼è½‰æ›å±¤)
    â”œâ”€â”€ B2UEncoder.kt (Big5 â†’ UTF-8)
    â”œâ”€â”€ U2BEncoder.kt (UTF-8 â†’ Big5)
    â””â”€â”€ TextConverterBuffer.kt
```

---

## ğŸ”— æ¨¡çµ„ä¾è³´é—œä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Bahamut (æ¥­å‹™é‚è¼¯)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              é é¢å±¤ (pages)                  â”‚  â”‚
â”‚  â”‚  - ArticlePage, BoardMainPage, ...          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           åˆ—è¡¨æ¶æ§‹ (listPage)                â”‚  â”‚
â”‚  â”‚  - TelnetListPage (20é …/å€å¡Š)               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚            å‘½ä»¤å±¤ (command)                  â”‚  â”‚
â”‚  â”‚  - BBS å‘½ä»¤å°è£ (CommandPattern)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  telnet (æ ¸å¿ƒ)  â”‚
        â”‚  - TelnetClient  â”‚
        â”‚  - TelnetAnsi    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ telnetUI (é¡¯ç¤º) â”‚
        â”‚  - TelnetView    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚textEncoderâ”‚          â”‚ dataPool â”‚
â”‚ (ç·¨ç¢¼è½‰æ›)â”‚          â”‚ (ç·©è¡å€)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                     â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  asFramework (æ¡†æ¶)  â”‚
        â”‚  - ASViewController   â”‚
        â”‚  - ASRunner          â”‚
        â”‚  - ASNavigationCtrl  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š é—œéµæ•¸æ“šæµ

### æ¥æ”¶ BBS è³‡æ–™æµ
```
BBS ä¼ºæœå™¨ (Big5)
    â†“
TelnetChannel (Socket/WebSocket)
    â†“
TelnetReceiver (æ¥æ”¶ä½å…ƒçµ„æµ)
    â†“
dataPool.MutableByteBuffer (ç·©è¡)
    â†“
textEncoder.B2UEncoder (Big5 â†’ UTF-8)
    â†“
TelnetAnsi (è§£æ ANSI è‰²ç¢¼)
    â†“
TelnetModel.frame (24x80 çµ‚ç«¯æ©Ÿç•«é¢)
    â†“
BahamutStateHandler (åµæ¸¬ç•«é¢é¡å‹)
    â†“
ASRunner.runInMainThread() (åˆ‡æ›ä¸»åŸ·è¡Œç·’)
    â†“
TelnetView (ç¹ªè£½é¡¯ç¤º)
    â†“
ä½¿ç”¨è€…çœ‹åˆ°ç•«é¢
```

### ç™¼é€ä½¿ç”¨è€…è¼¸å…¥æµ
```
ä½¿ç”¨è€…è¼¸å…¥ (UTF-8)
    â†“
textEncoder.U2BEncoder (UTF-8 â†’ Big5)
    â†“
TelnetCommand (å‘½ä»¤å°è£)
    â†“
TelnetOutputBuilder (å»ºæ§‹è¼¸å‡º)
    â†“
TelnetChannel.send()
    â†“
BBS ä¼ºæœå™¨ (Big5)
```

### æ–‡ç« åˆ—è¡¨è¼‰å…¥æµ
```
ä½¿ç”¨è€…é€²å…¥çœ‹æ¿
    â†“
BahamutStateHandler (åµæ¸¬çœ‹æ¿é é¢)
    â†“
PageContainer.boardPage (å–å¾—å–®ä¾‹é é¢)
    â†“
ASNavigationController.push() (æ¨é€é é¢)
    â†“
BoardMainPage.onPageWillAppear()
    â†“
BahamutCommandLoadFirstBlock (å‘½ä»¤)
    â†“
TelnetClient.send() (ç™¼é€æŒ‡ä»¤)
    â†“
æ¥æ”¶ä¼ºæœå™¨å›æ‡‰
    â†“
è§£æç‚º TelnetListPageBlock (20 é …)
    â†“
ç‰©ä»¶æ± å–å‡º BoardPageItem
    â†“
setBlock(0, block) (è¨­å®šå€å¡Š)
    â†“
ASRunner.runInMainThread()
    â†“
safeNotifyDataSetChanged() (æ›´æ–° ListView)
    â†“
ä½¿ç”¨è€…çœ‹åˆ°æ–‡ç« åˆ—è¡¨
```

---

## ğŸ¯ æ•ˆèƒ½å„ªåŒ–é—œéµé»

### 1. å€å¡Šè¼‰å…¥ (Block Loading)
```
å‚³çµ±æ–¹å¼: ä¸€æ¬¡è¼‰å…¥å…¨éƒ¨ 2000 ç¯‡æ–‡ç«  âŒ
å€å¡Šæ–¹å¼: æ¯æ¬¡è¼‰å…¥ 20 ç¯‡æ–‡ç«  âœ…

è¨˜æ†¶é«”ç¯€çœ: 100x
è¼‰å…¥é€Ÿåº¦: 10x
```

### 2. ç‰©ä»¶æ±  (Object Pooling)
```
å‚³çµ±æ–¹å¼: æ¯æ¬¡ new æ–°ç‰©ä»¶ï¼Œè§¸ç™¼ GC âŒ
ç‰©ä»¶æ± : é‡ç”¨ç‰©ä»¶ï¼Œæ¸›å°‘ GC âœ…

GC é »ç‡: é™ä½ 80%
å¹€ç‡: æå‡ 30%
```

### 3. åŸ·è¡Œç·’ç®¡ç† (Threading)
```
å‚³çµ±æ–¹å¼: Handler, runOnUiThread æ··ç”¨ âŒ
ASRunner: çµ±ä¸€åŸ·è¡Œç·’èª¿åº¦ âœ…

ç¨‹å¼ç¢¼æ¸…æ™°åº¦: æå‡ 50%
bug æ•¸é‡: æ¸›å°‘ 70%
```

### 4. ç·¨ç¢¼è½‰æ› (Encoding)
```
å‚³çµ±æ–¹å¼: æ¯æ¬¡ new String() âŒ
TextConverterBuffer: ç·©è¡æ± è½‰æ› âœ…

CPU ä½¿ç”¨: é™ä½ 40%
è¨˜æ†¶é«”é…ç½®: æ¸›å°‘ 60%
```

---

## ğŸ“ æª”æ¡ˆçµ±è¨ˆ

### ç¨‹å¼ç¢¼åˆ†å¸ƒ
```
com.kota å¥—ä»¶ç¸½è¨ˆ:
- ç¸½æª”æ¡ˆæ•¸: ~300 å€‹ Kotlin æª”æ¡ˆ
- ç¸½ç¨‹å¼ç¢¼è¡Œæ•¸: ~50,000 è¡Œ

æ¨¡çµ„åˆ†å¸ƒ:
- Bahamut: ~40% (æ¥­å‹™é‚è¼¯æœ€å¤š)
- asFramework: ~25% (æ¡†æ¶å±¤)
- telnet: ~20% (é€šè¨Šå±¤)
- telnetUI: ~10% (UI å±¤)
- textEncoder: ~3% (ç·¨ç¢¼è½‰æ›)
- dataPool: ~2% (è³‡æ–™æ± )
```

### æ–‡ä»¶è¦†è“‹ç‡
```
âœ… ç¬¬ä¸€å±¤æ¨¡çµ„: 100% (6/6)
âœ… ç¬¬äºŒå±¤è³‡æ–™å¤¾: 100% (17/17)
âœ… æ ¸å¿ƒé¡åˆ¥èªªæ˜: 100%
âœ… ç¨‹å¼ç¢¼ç¯„ä¾‹: 100%
âœ… å¸¸è¦‹å•é¡Œ: æ¶µè“‹ 90%+
```

---

## ğŸ”‘ é—œéµæª”æ¡ˆæ¸…å–®

### å¿…è®€æ ¸å¿ƒæª”æ¡ˆ
1. `BahamutController.kt` - ä¸»æ§åˆ¶å™¨ â­â­â­â­â­
2. `BahamutStateHandler.kt` - ç‹€æ…‹è™•ç†å™¨ â­â­â­â­â­
3. `ASRunner.kt` - åŸ·è¡Œç·’ç®¡ç† â­â­â­â­â­
4. `ASNavigationController.kt` - é é¢å°èˆª â­â­â­â­â­
5. `TelnetListPage.kt` - åˆ—è¡¨åŸºé¡ â­â­â­â­â­
6. `TelnetClient.kt` - Telnet å®¢æˆ¶ç«¯ â­â­â­â­â­
7. `TelnetAnsi.kt` - ANSI è§£æå™¨ â­â­â­â­â­
8. `TelnetViewDrawer.kt` - è¦–åœ–ç¹ªè£½ â­â­â­â­â­

### å¸¸ä¿®æ”¹çš„æª”æ¡ˆ
1. `BoardMainPage.kt` - çœ‹æ¿é é¢
2. `ArticlePage.kt` - æ–‡ç« é é¢
3. `DialogPostArticle.kt` - ç™¼æ–‡å°è©±æ¡†
4. `UserSettings.kt` - ä½¿ç”¨è€…è¨­å®š
5. `BahamutCommand*.kt` - å„ç¨® BBS å‘½ä»¤

---

**æœ€å¾Œæ›´æ–°**: 2025-12-11  
**è£½ä½œ**: Bahamut BBS é–‹ç™¼åœ˜éšŠ
